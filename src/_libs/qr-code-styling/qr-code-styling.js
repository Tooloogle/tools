var t,e={numeric:"Numeric",alphanumeric:"Alphanumeric",byte:"Byte",kanji:"Kanji"};let r=t=>!!t&&"object"==typeof t&&!Array.isArray(t);function i(t,...e){if(!e.length)return t;let o=e.shift();return void 0!==o&&r(t)&&r(o)?(t={...t},Object.keys(o).forEach(e=>{let n=t[e],a=o[e];Array.isArray(n)&&Array.isArray(a)?t[e]=a:r(n)&&r(a)?t[e]=i(Object.assign({},n),a):t[e]=a}),i(t,...e)):t}function o(t,e){let r=document.createElement("a");r.download=e,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function n({originalHeight:t,originalWidth:e,maxHiddenDots:r,maxHiddenAxisDots:i,dotSize:o}){let n={x:0,y:0},a={x:0,y:0};if(t<=0||e<=0||r<=0||o<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};let s=t/e;return n.x=Math.floor(Math.sqrt(r/s)),n.x<=0&&(n.x=1),i&&i<n.x&&(n.x=i),n.x%2==0&&n.x--,a.x=n.x*o,n.y=1+2*Math.ceil((n.x*s-1)/2),a.y=Math.round(a.x*s),(n.y*n.x>r||i&&i<n.y)&&(i&&i<n.y?(n.y=i,n.y%2==0&&n.x--):n.y-=2,a.y=n.y*o,n.x=1+2*Math.ceil((n.y/s-1)/2),a.x=Math.round(a.y/s)),{height:a.y,width:a.x,hideYDots:n.y,hideXDots:n.x}}var a={L:.07,M:.15,Q:.25,H:.3},s={dots:"dots",rounded:"rounded",classy:"classy",classyRounded:"classy-rounded",square:"square",extraRounded:"extra-rounded"};class h{constructor({context:t,type:e}){this._context=t,this._type=e}draw(t,e,r,i){let o;let n=this._context;switch(this._type){case s.dots:o=this._drawDot;break;case s.classy:o=this._drawClassy;break;case s.classyRounded:o=this._drawClassyRounded;break;case s.rounded:o=this._drawRounded;break;case s.extraRounded:o=this._drawExtraRounded;break;case s.square:default:o=this._drawSquare}o.call(this,{x:t,y:e,size:r,context:n,getNeighbor:i})}_rotateFigure({x:t,y:e,size:r,context:i,rotation:o=0,draw:n}){let a=t+r/2,s=e+r/2;i.translate(a,s),o&&i.rotate(o),n(),i.closePath(),o&&i.rotate(-o),i.translate(-a,-s)}_basicDot(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(0,0,e/2,0,2*Math.PI)}})}_basicSquare(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.rect(-e/2,-e/2,e,e)}})}_basicSideRounded(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(0,0,e/2,-Math.PI/2,Math.PI/2),r.lineTo(-e/2,e/2),r.lineTo(-e/2,-e/2),r.lineTo(0,-e/2)}})}_basicCornerRounded(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(0,0,e/2,-Math.PI/2,0),r.lineTo(e/2,e/2),r.lineTo(-e/2,e/2),r.lineTo(-e/2,-e/2),r.lineTo(0,-e/2)}})}_basicCornerExtraRounded(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(-e/2,e/2,e,-Math.PI/2,0),r.lineTo(-e/2,e/2),r.lineTo(-e/2,-e/2)}})}_basicCornersRounded(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(0,0,e/2,-Math.PI/2,0),r.lineTo(e/2,e/2),r.lineTo(0,e/2),r.arc(0,0,e/2,Math.PI/2,Math.PI),r.lineTo(-e/2,-e/2),r.lineTo(0,-e/2)}})}_basicCornersExtraRounded(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(-e/2,e/2,e,-Math.PI/2,0),r.arc(e/2,-e/2,e,Math.PI/2,Math.PI)}})}_drawDot({x:t,y:e,size:r,context:i}){this._basicDot({x:t,y:e,size:r,context:i,rotation:0})}_drawSquare({x:t,y:e,size:r,context:i}){this._basicSquare({x:t,y:e,size:r,context:i,rotation:0})}_drawRounded({x:t,y:e,size:r,context:i,getNeighbor:o}){let n=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,h=o?+o(0,1):0,d=n+a+s+h;if(0===d){this._basicDot({x:t,y:e,size:r,context:i,rotation:0});return}if(d>2||n&&a||s&&h){this._basicSquare({x:t,y:e,size:r,context:i,rotation:0});return}if(2===d){let o=0;n&&s?o=Math.PI/2:s&&a?o=Math.PI:a&&h&&(o=-Math.PI/2),this._basicCornerRounded({x:t,y:e,size:r,context:i,rotation:o});return}if(1===d){let o=0;s?o=Math.PI/2:a?o=Math.PI:h&&(o=-Math.PI/2),this._basicSideRounded({x:t,y:e,size:r,context:i,rotation:o});return}}_drawExtraRounded({x:t,y:e,size:r,context:i,getNeighbor:o}){let n=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,h=o?+o(0,1):0,d=n+a+s+h;if(0===d){this._basicDot({x:t,y:e,size:r,context:i,rotation:0});return}if(d>2||n&&a||s&&h){this._basicSquare({x:t,y:e,size:r,context:i,rotation:0});return}if(2===d){let o=0;n&&s?o=Math.PI/2:s&&a?o=Math.PI:a&&h&&(o=-Math.PI/2),this._basicCornerExtraRounded({x:t,y:e,size:r,context:i,rotation:o});return}if(1===d){let o=0;s?o=Math.PI/2:a?o=Math.PI:h&&(o=-Math.PI/2),this._basicSideRounded({x:t,y:e,size:r,context:i,rotation:o});return}}_drawClassy({x:t,y:e,size:r,context:i,getNeighbor:o}){let n=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,h=o?+o(0,1):0;if(0===n+a+s+h){this._basicCornersRounded({x:t,y:e,size:r,context:i,rotation:Math.PI/2});return}if(!n&&!s){this._basicCornerRounded({x:t,y:e,size:r,context:i,rotation:-Math.PI/2});return}if(!a&&!h){this._basicCornerRounded({x:t,y:e,size:r,context:i,rotation:Math.PI/2});return}this._basicSquare({x:t,y:e,size:r,context:i,rotation:0})}_drawClassyRounded({x:t,y:e,size:r,context:i,getNeighbor:o}){let n=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,h=o?+o(0,1):0;if(0===n+a+s+h){this._basicCornersRounded({x:t,y:e,size:r,context:i,rotation:Math.PI/2});return}if(!n&&!s){this._basicCornerExtraRounded({x:t,y:e,size:r,context:i,rotation:-Math.PI/2});return}if(!a&&!h){this._basicCornerExtraRounded({x:t,y:e,size:r,context:i,rotation:Math.PI/2});return}this._basicSquare({x:t,y:e,size:r,context:i,rotation:0})}}var d={dot:"dot",square:"square",extraRounded:"extra-rounded"};class c{constructor({context:t,type:e}){this._context=t,this._type=e}draw(t,e,r,i){let o;let n=this._context;switch(this._type){case d.square:o=this._drawSquare;break;case d.extraRounded:o=this._drawExtraRounded;break;case d.dot:default:o=this._drawDot}o.call(this,{x:t,y:e,size:r,context:n,rotation:i})}_rotateFigure({x:t,y:e,size:r,context:i,rotation:o=0,draw:n}){let a=t+r/2,s=e+r/2;i.translate(a,s),o&&i.rotate(o),n(),i.closePath(),o&&i.rotate(-o),i.translate(-a,-s)}_basicDot(t){let{size:e,context:r}=t,i=e/7;this._rotateFigure({...t,draw:()=>{r.arc(0,0,e/2,0,2*Math.PI),r.arc(0,0,e/2-i,0,2*Math.PI)}})}_basicSquare(t){let{size:e,context:r}=t,i=e/7;this._rotateFigure({...t,draw:()=>{r.rect(-e/2,-e/2,e,e),r.rect(-e/2+i,-e/2+i,e-2*i,e-2*i)}})}_basicExtraRounded(t){let{size:e,context:r}=t,i=e/7;this._rotateFigure({...t,draw:()=>{r.arc(-i,-i,2.5*i,Math.PI,-Math.PI/2),r.lineTo(i,-3.5*i),r.arc(i,-i,2.5*i,-Math.PI/2,0),r.lineTo(3.5*i,-i),r.arc(i,i,2.5*i,0,Math.PI/2),r.lineTo(-i,3.5*i),r.arc(-i,i,2.5*i,Math.PI/2,Math.PI),r.lineTo(-3.5*i,-i),r.arc(-i,-i,1.5*i,Math.PI,-Math.PI/2),r.lineTo(i,-2.5*i),r.arc(i,-i,1.5*i,-Math.PI/2,0),r.lineTo(2.5*i,-i),r.arc(i,i,1.5*i,0,Math.PI/2),r.lineTo(-i,2.5*i),r.arc(-i,i,1.5*i,Math.PI/2,Math.PI),r.lineTo(-2.5*i,-i)}})}_drawDot({x:t,y:e,size:r,context:i,rotation:o}){this._basicDot({x:t,y:e,size:r,context:i,rotation:o})}_drawSquare({x:t,y:e,size:r,context:i,rotation:o}){this._basicSquare({x:t,y:e,size:r,context:i,rotation:o})}_drawExtraRounded({x:t,y:e,size:r,context:i,rotation:o}){this._basicExtraRounded({x:t,y:e,size:r,context:i,rotation:o})}}var l={dot:"dot",square:"square"};class u{constructor({context:t,type:e}){this._context=t,this._type=e}draw(t,e,r,i){let o;let n=this._context;switch(this._type){case l.square:o=this._drawSquare;break;case l.dot:default:o=this._drawDot}o.call(this,{x:t,y:e,size:r,context:n,rotation:i})}_rotateFigure({x:t,y:e,size:r,context:i,rotation:o=0,draw:n}){let a=t+r/2,s=e+r/2;i.translate(a,s),o&&i.rotate(o),n(),i.closePath(),o&&i.rotate(-o),i.translate(-a,-s)}_basicDot(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.arc(0,0,e/2,0,2*Math.PI)}})}_basicSquare(t){let{size:e,context:r}=t;this._rotateFigure({...t,draw:()=>{r.rect(-e/2,-e/2,e,e)}})}_drawDot({x:t,y:e,size:r,context:i,rotation:o}){this._basicDot({x:t,y:e,size:r,context:i,rotation:o})}_drawSquare({x:t,y:e,size:r,context:i,rotation:o}){this._basicSquare({x:t,y:e,size:r,context:i,rotation:o})}}var g={radial:"radial"};let f=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],p=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class w{constructor(t){this._canvas=document.createElement("canvas"),this._canvas.width=t.width,this._canvas.height=t.height,this._options=t}get context(){return this._canvas.getContext("2d")}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvas(){return this._canvas}clear(){let t=this.context;t&&t.clearRect(0,0,this._canvas.width,this._canvas.height)}async drawQR(t){let e=t.getModuleCount(),r=Math.floor((Math.min(this._options.width,this._options.height)-2*this._options.margin)/e),i={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=t,this._options.image){if(await this.loadImage(),!this._image)return;let{imageOptions:t,qrOptions:o}=this._options,s=Math.floor(t.imageSize*a[o.errorCorrectionLevel]*e*e);i=n({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:s,maxHiddenAxisDots:e-14,dotSize:r})}this.clear(),this.drawBackground(),this.drawDots((t,r)=>!(this._options.imageOptions.hideBackgroundDots&&t>=(e-i.hideXDots)/2&&t<(e+i.hideXDots)/2&&r>=(e-i.hideYDots)/2&&r<(e+i.hideYDots)/2||f[t]?.[r]||f[t-e+7]?.[r]||f[t]?.[r-e+7]||p[t]?.[r]||p[t-e+7]?.[r]||p[t]?.[r-e+7])),this.drawCorners(),this._options.image&&this.drawImage({width:i.width,height:i.height,count:e,dotSize:r})}drawBackground(){let t=this.context,e=this._options;if(t){if(e.backgroundOptions.gradient){let r=e.backgroundOptions.gradient,i=this._createGradient({context:t,options:r,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});r.colorStops.forEach(({offset:t,color:e})=>{i.addColorStop(t,e)}),t.fillStyle=i}else e.backgroundOptions.color&&(t.fillStyle=e.backgroundOptions.color);t.fillRect(0,0,this._canvas.width,this._canvas.height)}}drawDots(t){if(!this._qr)throw"QR code is not defined";let e=this.context;if(!e)throw"QR code is not defined";let r=this._options,i=this._qr.getModuleCount();if(i>r.width||i>r.height)throw"The canvas is too small.";let o=Math.floor((Math.min(r.width,r.height)-2*r.margin)/i),n=Math.floor((r.width-i*o)/2),a=Math.floor((r.height-i*o)/2),s=new h({context:e,type:r.dotsOptions.type});e.beginPath();for(let e=0;e<i;e++)for(let r=0;r<i;r++)(!t||t(e,r))&&this._qr.isDark(e,r)&&s.draw(n+e*o,a+r*o,o,(o,n)=>!(e+o<0)&&!(r+n<0)&&!(e+o>=i)&&!(r+n>=i)&&(!t||!!t(e+o,r+n))&&!!this._qr&&this._qr.isDark(e+o,r+n));if(r.dotsOptions.gradient){let t=r.dotsOptions.gradient,s=this._createGradient({context:e,options:t,additionalRotation:0,x:n,y:a,size:i*o});t.colorStops.forEach(({offset:t,color:e})=>{s.addColorStop(t,e)}),e.fillStyle=e.strokeStyle=s}else r.dotsOptions.color&&(e.fillStyle=e.strokeStyle=r.dotsOptions.color);e.fill("evenodd")}drawCorners(t){if(!this._qr)throw"QR code is not defined";let e=this.context;if(!e)throw"QR code is not defined";let r=this._options,i=this._qr.getModuleCount(),o=Math.floor((Math.min(r.width,r.height)-2*r.margin)/i),n=7*o,a=3*o,s=Math.floor((r.width-i*o)/2),d=Math.floor((r.height-i*o)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([l,g,w])=>{if(t&&!t(l,g))return;let _=s+l*o*(i-7),y=d+g*o*(i-7);if(r.cornersSquareOptions?.type){let t=new c({context:e,type:r.cornersSquareOptions?.type});e.beginPath(),t.draw(_,y,n,w)}else{let t=new h({context:e,type:r.dotsOptions.type});e.beginPath();for(let e=0;e<f.length;e++)for(let r=0;r<f[e].length;r++)f[e]?.[r]&&t.draw(_+e*o,y+r*o,o,(t,i)=>!!f[e+t]?.[r+i])}if(r.cornersSquareOptions?.gradient){let t=r.cornersSquareOptions.gradient,i=this._createGradient({context:e,options:t,additionalRotation:w,x:_,y:y,size:n});t.colorStops.forEach(({offset:t,color:e})=>{i.addColorStop(t,e)}),e.fillStyle=e.strokeStyle=i}else r.cornersSquareOptions?.color&&(e.fillStyle=e.strokeStyle=r.cornersSquareOptions.color);if(e.fill("evenodd"),r.cornersDotOptions?.type){let t=new u({context:e,type:r.cornersDotOptions?.type});e.beginPath(),t.draw(_+2*o,y+2*o,a,w)}else{let t=new h({context:e,type:r.dotsOptions.type});e.beginPath();for(let e=0;e<p.length;e++)for(let r=0;r<p[e].length;r++)p[e]?.[r]&&t.draw(_+e*o,y+r*o,o,(t,i)=>!!p[e+t]?.[r+i])}if(r.cornersDotOptions?.gradient){let t=r.cornersDotOptions.gradient,i=this._createGradient({context:e,options:t,additionalRotation:w,x:_+2*o,y:y+2*o,size:a});t.colorStops.forEach(({offset:t,color:e})=>{i.addColorStop(t,e)}),e.fillStyle=e.strokeStyle=i}else r.cornersDotOptions?.color&&(e.fillStyle=e.strokeStyle=r.cornersDotOptions.color);e.fill("evenodd")})}loadImage(){return new Promise((t,e)=>{let r=this._options,i=new Image;if(!r.image)return e("Image is not defined");"string"==typeof r.imageOptions.crossOrigin&&(i.crossOrigin=r.imageOptions.crossOrigin),this._image=i,i.onload=()=>{t()},i.src=r.image})}drawImage({width:t,height:e,count:r,dotSize:i}){let o=this.context;if(!o)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";let n=this._options,a=Math.floor((n.width-r*i)/2),s=Math.floor((n.height-r*i)/2),h=a+n.imageOptions.margin+(r*i-t)/2,d=s+n.imageOptions.margin+(r*i-e)/2,c=t-2*n.imageOptions.margin,l=e-2*n.imageOptions.margin;o.drawImage(this._image,h,d,c<0?0:c,l<0?0:l)}_createGradient({context:t,options:e,additionalRotation:r,x:i,y:o,size:n}){let a;if(e.type===g.radial)a=t.createRadialGradient(i+n/2,o+n/2,0,i+n/2,o+n/2,n/2);else{let s=((e.rotation||0)+r)%(2*Math.PI),h=(s+2*Math.PI)%(2*Math.PI),d=i+n/2,c=o+n/2,l=i+n/2,u=o+n/2;h>=0&&h<=.25*Math.PI||h>1.75*Math.PI&&h<=2*Math.PI?(d-=n/2,c-=n/2*Math.tan(s),l+=n/2,u+=n/2*Math.tan(s)):h>.25*Math.PI&&h<=.75*Math.PI?(c-=n/2,d-=n/2/Math.tan(s),u+=n/2,l+=n/2/Math.tan(s)):h>.75*Math.PI&&h<=1.25*Math.PI?(d+=n/2,c+=n/2*Math.tan(s),l-=n/2,u-=n/2*Math.tan(s)):h>1.25*Math.PI&&h<=1.75*Math.PI&&(c+=n/2,d+=n/2/Math.tan(s),u-=n/2,l-=n/2/Math.tan(s)),a=t.createLinearGradient(Math.round(d),Math.round(c),Math.round(l),Math.round(u))}return a}}class _{constructor({svg:t,type:e}){this._svg=t,this._type=e}draw(t,e,r,i){let o;switch(this._type){case s.dots:o=this._drawDot;break;case s.classy:o=this._drawClassy;break;case s.classyRounded:o=this._drawClassyRounded;break;case s.rounded:o=this._drawRounded;break;case s.extraRounded:o=this._drawExtraRounded;break;case s.square:default:o=this._drawSquare}o.call(this,{x:t,y:e,size:r,getNeighbor:i})}_rotateFigure({x:t,y:e,size:r,rotation:i=0,draw:o}){o(),this._element?.setAttribute("transform",`rotate(${180*i/Math.PI},${t+r/2},${e+r/2})`)}_basicDot(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(r+e/2)),this._element.setAttribute("cy",String(i+e/2)),this._element.setAttribute("r",String(e/2))}})}_basicSquare(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(r)),this._element.setAttribute("y",String(i)),this._element.setAttribute("width",String(e)),this._element.setAttribute("height",String(e))}})}_basicSideRounded(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${e}h ${e/2}a ${e/2} ${e/2}, 0, 0, 0, 0 ${-e}`)}})}_basicCornerRounded(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${e}h ${e}v ${-e/2}a ${e/2} ${e/2}, 0, 0, 0, ${-e/2} ${-e/2}`)}})}_basicCornerExtraRounded(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${e}h ${e}a ${e} ${e}, 0, 0, 0, ${-e} ${-e}`)}})}_basicCornersRounded(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${e/2}a ${e/2} ${e/2}, 0, 0, 0, ${e/2} ${e/2}h ${e/2}v ${-e/2}a ${e/2} ${e/2}, 0, 0, 0, ${-e/2} ${-e/2}`)}})}_drawDot({x:t,y:e,size:r}){this._basicDot({x:t,y:e,size:r,rotation:0})}_drawSquare({x:t,y:e,size:r}){this._basicSquare({x:t,y:e,size:r,rotation:0})}_drawRounded({x:t,y:e,size:r,getNeighbor:i}){let o=i?+i(-1,0):0,n=i?+i(1,0):0,a=i?+i(0,-1):0,s=i?+i(0,1):0,h=o+n+a+s;if(0===h){this._basicDot({x:t,y:e,size:r,rotation:0});return}if(h>2||o&&n||a&&s){this._basicSquare({x:t,y:e,size:r,rotation:0});return}if(2===h){let i=0;o&&a?i=Math.PI/2:a&&n?i=Math.PI:n&&s&&(i=-Math.PI/2),this._basicCornerRounded({x:t,y:e,size:r,rotation:i});return}if(1===h){let i=0;a?i=Math.PI/2:n?i=Math.PI:s&&(i=-Math.PI/2),this._basicSideRounded({x:t,y:e,size:r,rotation:i});return}}_drawExtraRounded({x:t,y:e,size:r,getNeighbor:i}){let o=i?+i(-1,0):0,n=i?+i(1,0):0,a=i?+i(0,-1):0,s=i?+i(0,1):0,h=o+n+a+s;if(0===h){this._basicDot({x:t,y:e,size:r,rotation:0});return}if(h>2||o&&n||a&&s){this._basicSquare({x:t,y:e,size:r,rotation:0});return}if(2===h){let i=0;o&&a?i=Math.PI/2:a&&n?i=Math.PI:n&&s&&(i=-Math.PI/2),this._basicCornerExtraRounded({x:t,y:e,size:r,rotation:i});return}if(1===h){let i=0;a?i=Math.PI/2:n?i=Math.PI:s&&(i=-Math.PI/2),this._basicSideRounded({x:t,y:e,size:r,rotation:i});return}}_drawClassy({x:t,y:e,size:r,getNeighbor:i}){let o=i?+i(-1,0):0,n=i?+i(1,0):0,a=i?+i(0,-1):0,s=i?+i(0,1):0;if(0===o+n+a+s){this._basicCornersRounded({x:t,y:e,size:r,rotation:Math.PI/2});return}if(!o&&!a){this._basicCornerRounded({x:t,y:e,size:r,rotation:-Math.PI/2});return}if(!n&&!s){this._basicCornerRounded({x:t,y:e,size:r,rotation:Math.PI/2});return}this._basicSquare({x:t,y:e,size:r,rotation:0})}_drawClassyRounded({x:t,y:e,size:r,getNeighbor:i}){let o=i?+i(-1,0):0,n=i?+i(1,0):0,a=i?+i(0,-1):0,s=i?+i(0,1):0;if(0===o+n+a+s){this._basicCornersRounded({x:t,y:e,size:r,rotation:Math.PI/2});return}if(!o&&!a){this._basicCornerExtraRounded({x:t,y:e,size:r,rotation:-Math.PI/2});return}if(!n&&!s){this._basicCornerExtraRounded({x:t,y:e,size:r,rotation:Math.PI/2});return}this._basicSquare({x:t,y:e,size:r,rotation:0})}}class y{constructor({svg:t,type:e}){this._svg=t,this._type=e}draw(t,e,r,i){let o;switch(this._type){case d.square:o=this._drawSquare;break;case d.extraRounded:o=this._drawExtraRounded;break;case d.dot:default:o=this._drawDot}o.call(this,{x:t,y:e,size:r,rotation:i})}_rotateFigure({x:t,y:e,size:r,rotation:i=0,draw:o}){o(),this._element?.setAttribute("transform",`rotate(${180*i/Math.PI},${t+r/2},${e+r/2})`)}_basicDot(t){let{size:e,x:r,y:i}=t,o=e/7;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${r+e/2} ${i}a ${e/2} ${e/2} 0 1 0 0.1 0zm 0 ${o}a ${e/2-o} ${e/2-o} 0 1 1 -0.1 0Z`)}})}_basicSquare(t){let{size:e,x:r,y:i}=t,o=e/7;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${r} ${i}v ${e}h ${e}v ${-e}zM ${r+o} ${i+o}h ${e-2*o}v ${e-2*o}h ${-e+2*o}z`)}})}_basicExtraRounded(t){let{size:e,x:r,y:i}=t,o=e/7;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${r} ${i+2.5*o}v ${2*o}a ${2.5*o} ${2.5*o}, 0, 0, 0, ${2.5*o} ${2.5*o}h ${2*o}a ${2.5*o} ${2.5*o}, 0, 0, 0, ${2.5*o} ${-(2.5*o)}v ${-2*o}a ${2.5*o} ${2.5*o}, 0, 0, 0, ${-(2.5*o)} ${-(2.5*o)}h ${-2*o}a ${2.5*o} ${2.5*o}, 0, 0, 0, ${-(2.5*o)} ${2.5*o}M ${r+2.5*o} ${i+o}h ${2*o}a ${1.5*o} ${1.5*o}, 0, 0, 1, ${1.5*o} ${1.5*o}v ${2*o}a ${1.5*o} ${1.5*o}, 0, 0, 1, ${-(1.5*o)} ${1.5*o}h ${-2*o}a ${1.5*o} ${1.5*o}, 0, 0, 1, ${-(1.5*o)} ${-(1.5*o)}v ${-2*o}a ${1.5*o} ${1.5*o}, 0, 0, 1, ${1.5*o} ${-(1.5*o)}`)}})}_drawDot({x:t,y:e,size:r,rotation:i}){this._basicDot({x:t,y:e,size:r,rotation:i})}_drawSquare({x:t,y:e,size:r,rotation:i}){this._basicSquare({x:t,y:e,size:r,rotation:i})}_drawExtraRounded({x:t,y:e,size:r,rotation:i}){this._basicExtraRounded({x:t,y:e,size:r,rotation:i})}}class m{constructor({svg:t,type:e}){this._svg=t,this._type=e}draw(t,e,r,i){let o;switch(this._type){case l.square:o=this._drawSquare;break;case l.dot:default:o=this._drawDot}o.call(this,{x:t,y:e,size:r,rotation:i})}_rotateFigure({x:t,y:e,size:r,rotation:i=0,draw:o}){o(),this._element?.setAttribute("transform",`rotate(${180*i/Math.PI},${t+r/2},${e+r/2})`)}_basicDot(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(r+e/2)),this._element.setAttribute("cy",String(i+e/2)),this._element.setAttribute("r",String(e/2))}})}_basicSquare(t){let{size:e,x:r,y:i}=t;this._rotateFigure({...t,draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(r)),this._element.setAttribute("y",String(i)),this._element.setAttribute("width",String(e)),this._element.setAttribute("height",String(e))}})}_drawDot({x:t,y:e,size:r,rotation:i}){this._basicDot({x:t,y:e,size:r,rotation:i})}_drawSquare({x:t,y:e,size:r,rotation:i}){this._basicSquare({x:t,y:e,size:r,rotation:i})}}let x=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],v=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class b{constructor(t){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=t}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}clear(){let t=this._element;this._element=t.cloneNode(!1),t?.parentNode?.replaceChild(this._element,t),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs)}async drawQR(t){let e=t.getModuleCount(),r=Math.floor((Math.min(this._options.width,this._options.height)-2*this._options.margin)/e),i={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=t,this._options.image){if(await this.loadImage(),!this._image)return;let{imageOptions:t,qrOptions:o}=this._options,s=Math.floor(t.imageSize*a[o.errorCorrectionLevel]*e*e);i=n({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:s,maxHiddenAxisDots:e-14,dotSize:r})}this.clear(),this.drawBackground(),this.drawDots((t,r)=>!(this._options.imageOptions.hideBackgroundDots&&t>=(e-i.hideXDots)/2&&t<(e+i.hideXDots)/2&&r>=(e-i.hideYDots)/2&&r<(e+i.hideYDots)/2||x[t]?.[r]||x[t-e+7]?.[r]||x[t]?.[r-e+7]||v[t]?.[r]||v[t-e+7]?.[r]||v[t]?.[r-e+7])),this.drawCorners(),this._options.image&&this.drawImage({width:i.width,height:i.height,count:e,dotSize:r})}drawBackground(){let t=this._element,e=this._options;if(t){let t=e.backgroundOptions?.gradient,r=e.backgroundOptions?.color;(t||r)&&this._createColor({options:t,color:r,additionalRotation:0,x:0,y:0,height:e.height,width:e.width,name:"background-color"})}}drawDots(t){if(!this._qr)throw"QR code is not defined";let e=this._options,r=this._qr.getModuleCount();if(r>e.width||r>e.height)throw"The canvas is too small.";let i=Math.floor((Math.min(e.width,e.height)-2*e.margin)/r),o=Math.floor((e.width-r*i)/2),n=Math.floor((e.height-r*i)/2),a=new _({svg:this._element,type:e.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:e.dotsOptions?.gradient,color:e.dotsOptions.color,additionalRotation:0,x:o,y:n,height:r*i,width:r*i,name:"dot-color"});for(let e=0;e<r;e++)for(let s=0;s<r;s++)(!t||t(e,s))&&this._qr?.isDark(e,s)&&(a.draw(o+e*i,n+s*i,i,(i,o)=>!(e+i<0)&&!(s+o<0)&&!(e+i>=r)&&!(s+o>=r)&&(!t||!!t(e+i,s+o))&&!!this._qr&&this._qr.isDark(e+i,s+o)),a._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(a._element))}drawCorners(){if(!this._qr)throw"QR code is not defined";let t=this._element,e=this._options;if(!t)throw"Element code is not defined";let r=this._qr.getModuleCount(),i=Math.floor((Math.min(e.width,e.height)-2*e.margin)/r),o=7*i,n=3*i,a=Math.floor((e.width-r*i)/2),s=Math.floor((e.height-r*i)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([t,h,d])=>{let c=a+t*i*(r-7),l=s+h*i*(r-7),u=this._dotsClipPath,g=this._dotsClipPath;if((e.cornersSquareOptions?.gradient||e.cornersSquareOptions?.color)&&((u=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",`clip-path-corners-square-color-${t}-${h}`),this._defs.appendChild(u),this._cornersSquareClipPath=this._cornersDotClipPath=g=u,this._createColor({options:e.cornersSquareOptions?.gradient,color:e.cornersSquareOptions?.color,additionalRotation:d,x:c,y:l,height:o,width:o,name:`corners-square-color-${t}-${h}`})),e.cornersSquareOptions?.type){let t=new y({svg:this._element,type:e.cornersSquareOptions.type});t.draw(c,l,o,d),t._element&&u&&u.appendChild(t._element)}else{let t=new _({svg:this._element,type:e.dotsOptions.type});for(let e=0;e<x.length;e++)for(let r=0;r<x[e].length;r++)x[e]?.[r]&&(t.draw(c+e*i,l+r*i,i,(t,i)=>!!x[e+t]?.[r+i]),t._element&&u&&u.appendChild(t._element))}if((e.cornersDotOptions?.gradient||e.cornersDotOptions?.color)&&((g=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",`clip-path-corners-dot-color-${t}-${h}`),this._defs.appendChild(g),this._cornersDotClipPath=g,this._createColor({options:e.cornersDotOptions?.gradient,color:e.cornersDotOptions?.color,additionalRotation:d,x:c+2*i,y:l+2*i,height:n,width:n,name:`corners-dot-color-${t}-${h}`})),e.cornersDotOptions?.type){let t=new m({svg:this._element,type:e.cornersDotOptions.type});t.draw(c+2*i,l+2*i,n,d),t._element&&g&&g.appendChild(t._element)}else{let t=new _({svg:this._element,type:e.dotsOptions.type});for(let e=0;e<v.length;e++)for(let r=0;r<v[e].length;r++)v[e]?.[r]&&(t.draw(c+e*i,l+r*i,i,(t,i)=>!!v[e+t]?.[r+i]),t._element&&g&&g.appendChild(t._element))}})}loadImage(){return new Promise((t,e)=>{let r=this._options,i=new Image;if(!r.image)return e("Image is not defined");"string"==typeof r.imageOptions.crossOrigin&&(i.crossOrigin=r.imageOptions.crossOrigin),this._image=i,i.onload=()=>{t()},i.src=r.image})}drawImage({width:t,height:e,count:r,dotSize:i}){let o=this._options,n=Math.floor((o.width-r*i)/2),a=Math.floor((o.height-r*i)/2),s=n+o.imageOptions.margin+(r*i-t)/2,h=a+o.imageOptions.margin+(r*i-e)/2,d=t-2*o.imageOptions.margin,c=e-2*o.imageOptions.margin,l=document.createElementNS("http://www.w3.org/2000/svg","image");l.setAttribute("href",o.image||""),l.setAttribute("x",String(s)),l.setAttribute("y",String(h)),l.setAttribute("width",`${d}px`),l.setAttribute("height",`${c}px`),this._element.appendChild(l)}_createColor({options:t,color:e,additionalRotation:r,x:i,y:o,height:n,width:a,name:s}){let h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",String(i)),h.setAttribute("y",String(o)),h.setAttribute("height",String(n)),h.setAttribute("width",String(a)),h.setAttribute("clip-path",`url('#clip-path-${s}')`),t){let e;if(t.type===g.radial)(e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",s),e.setAttribute("gradientUnits","userSpaceOnUse"),e.setAttribute("fx",String(i+a/2)),e.setAttribute("fy",String(o+n/2)),e.setAttribute("cx",String(i+a/2)),e.setAttribute("cy",String(o+n/2)),e.setAttribute("r",String((a>n?a:n)/2));else{let h=((t.rotation||0)+r)%(2*Math.PI),d=(h+2*Math.PI)%(2*Math.PI),c=i+a/2,l=o+n/2,u=i+a/2,g=o+n/2;d>=0&&d<=.25*Math.PI||d>1.75*Math.PI&&d<=2*Math.PI?(c-=a/2,l-=n/2*Math.tan(h),u+=a/2,g+=n/2*Math.tan(h)):d>.25*Math.PI&&d<=.75*Math.PI?(l-=n/2,c-=a/2/Math.tan(h),g+=n/2,u+=a/2/Math.tan(h)):d>.75*Math.PI&&d<=1.25*Math.PI?(c+=a/2,l+=n/2*Math.tan(h),u-=a/2,g-=n/2*Math.tan(h)):d>1.25*Math.PI&&d<=1.75*Math.PI&&(l+=n/2,c+=a/2/Math.tan(h),g-=n/2,u-=a/2/Math.tan(h)),(e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",s),e.setAttribute("gradientUnits","userSpaceOnUse"),e.setAttribute("x1",String(Math.round(c))),e.setAttribute("y1",String(Math.round(l))),e.setAttribute("x2",String(Math.round(u))),e.setAttribute("y2",String(Math.round(g)))}t.colorStops.forEach(({offset:t,color:r})=>{let i=document.createElementNS("http://www.w3.org/2000/svg","stop");i.setAttribute("offset",`${100*t}%`),i.setAttribute("stop-color",r),e.appendChild(i)}),h.setAttribute("fill",`url('#${s}')`),this._defs.appendChild(e)}else e&&h.setAttribute("fill",e);this._element.appendChild(h)}}var M={canvas:"canvas",svg:"svg"};let S={};for(let t=0;t<=40;t++)S[t]=t;var $=S,P={L:"L",M:"M",Q:"Q",H:"H"};let C={type:M.canvas,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:$[0],mode:void 0,errorCorrectionLevel:P.Q},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};function A(t){let e={...t};if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map(t=>({...t,offset:Number(t.offset)})),e}function D(t){let e={...t};return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions={...e.imageOptions,hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)},e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions={...e.dotsOptions},e.dotsOptions.gradient&&(e.dotsOptions.gradient=A(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions={...e.cornersSquareOptions},e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=A(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions={...e.cornersDotOptions},e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=A(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions={...e.backgroundOptions},e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=A(e.backgroundOptions.gradient))),e}var I={},z=function(){var t,e,r,i,o,n,a,s=function(t,e){var r=t,i=d[e],o=null,n=0,a=null,s=[],h={},c=function(t,e){o=function(t){for(var e=Array(t),r=0;r<t;r+=1){e[r]=Array(t);for(var i=0;i<t;i+=1)e[r][i]=null}return e}(n=4*r+17),u(0,0),u(n-7,0),u(0,n-7),b(),v(),$(t,e),r>=7&&M(t),null==a&&(a=A(r,i,s)),P(a,e)},u=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1)&&!(n<=t+r))for(var i=-1;i<=7;i+=1)e+i<=-1||n<=e+i||(0<=r&&r<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=i&&i<=4?o[t+r][e+i]=!0:o[t+r][e+i]=!1)},x=function(){for(var t=0,e=0,r=0;r<8;r+=1){c(!0,r);var i=l.getLostPoint(h);(0==r||t>i)&&(t=i,e=r)}return e},v=function(){for(var t=8;t<n-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<n-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},b=function(){for(var t=l.getPatternPosition(r),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var n=t[e],a=t[i];if(null==o[n][a])for(var s=-2;s<=2;s+=1)for(var h=-2;h<=2;h+=1)-2==s||2==s||-2==h||2==h||0==s&&0==h?o[n+s][a+h]=!0:o[n+s][a+h]=!1}},M=function(t){for(var e=l.getBCHTypeNumber(r),i=0;i<18;i+=1){var a=!t&&(e>>i&1)==1;o[Math.floor(i/3)][i%3+n-8-3]=a}for(var i=0;i<18;i+=1){var a=!t&&(e>>i&1)==1;o[i%3+n-8-3][Math.floor(i/3)]=a}},$=function(t,e){for(var r=i<<3|e,a=l.getBCHTypeInfo(r),s=0;s<15;s+=1){var h=!t&&(a>>s&1)==1;s<6?o[s][8]=h:s<8?o[s+1][8]=h:o[n-15+s][8]=h}for(var s=0;s<15;s+=1){var h=!t&&(a>>s&1)==1;s<8?o[8][n-s-1]=h:s<9?o[8][15-s-1+1]=h:o[8][15-s-1]=h}o[n-8][8]=!t},P=function(t,e){for(var r=-1,i=n-1,a=7,s=0,h=l.getMaskFunction(e),d=n-1;d>0;d-=2)for(6==d&&(d-=1);;){for(var c=0;c<2;c+=1)if(null==o[i][d-c]){var u=!1;s<t.length&&(u=(t[s]>>>a&1)==1),h(i,d-c)&&(u=!u),o[i][d-c]=u,-1==(a-=1)&&(s+=1,a=7)}if((i+=r)<0||n<=i){i-=r,r=-r;break}}},C=function(t,e){for(var r=0,i=0,o=0,n=Array(e.length),a=Array(e.length),s=0;s<e.length;s+=1){var h=e[s].dataCount,d=e[s].totalCount-h;i=Math.max(i,h),o=Math.max(o,d),n[s]=Array(h);for(var c=0;c<n[s].length;c+=1)n[s][c]=255&t.getBuffer()[c+r];r+=h;var u=l.getErrorCorrectPolynomial(d),f=g(n[s],u.getLength()-1).mod(u);a[s]=Array(u.getLength()-1);for(var c=0;c<a[s].length;c+=1){var p=c+f.getLength()-a[s].length;a[s][c]=p>=0?f.getAt(p):0}}for(var w=0,c=0;c<e.length;c+=1)w+=e[c].totalCount;for(var _=Array(w),y=0,c=0;c<i;c+=1)for(var s=0;s<e.length;s+=1)c<n[s].length&&(_[y]=n[s][c],y+=1);for(var c=0;c<o;c+=1)for(var s=0;s<e.length;s+=1)c<a[s].length&&(_[y]=a[s][c],y+=1);return _},A=function(t,e,r){for(var i=f.getRSBlocks(t,e),o=p(),n=0;n<r.length;n+=1){var a=r[n];o.put(a.getMode(),4),o.put(a.getLength(),l.getLengthInBits(a.getMode(),t)),a.write(o)}for(var s=0,n=0;n<i.length;n+=1)s+=i[n].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s)&&(o.put(236,8),!(o.getLengthInBits()>=8*s));)o.put(17,8);return C(o,i)};h.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=w(t);break;case"Alphanumeric":r=_(t);break;case"Byte":r=y(t);break;case"Kanji":r=m(t);break;default:throw"mode:"+e}s.push(r),a=null},h.isDark=function(t,e){if(t<0||n<=t||e<0||n<=e)throw t+","+e;return o[t][e]},h.getModuleCount=function(){return n},h.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=f.getRSBlocks(t,i),o=p(),n=0;n<s.length;n++){var a=s[n];o.put(a.getMode(),4),o.put(a.getLength(),l.getLengthInBits(a.getMode(),t)),a.write(o)}for(var h=0,n=0;n<e.length;n++)h+=e[n].dataCount;if(o.getLengthInBits()<=8*h)break}r=t}c(!1,x())},h.createTableTag=function(t,e){t=t||2;var r="";r+='<table style=" border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px; margin: '+(e=void 0===e?4*t:e)+'px;"><tbody>';for(var i=0;i<h.getModuleCount();i+=1){r+="<tr>";for(var o=0;o<h.getModuleCount();o+=1)r+='<td style=" border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px; margin: 0px; width: '+t+"px; height: "+t+"px; background-color: "+(h.isDark(i,o)?"#000000":"#ffffff")+';"/>';r+="</tr>"}return r+"</tbody></table>"},h.createSvgTag=function(t,e,r,i){var o={};"object"==typeof arguments[0]&&(o=arguments[0],t=o.cellSize,e=o.margin,r=o.alt,i=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var n,a,s,d,c=h.getModuleCount()*t+2*e,l="";for(d="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"'+(o.scalable?"":' width="'+c+'px" height="'+c+'px"')+(' viewBox="0 0 '+c+" ")+c+'"  preserveAspectRatio="xMinYMin meet"'+(i.text||r.text?' role="img" aria-labelledby="'+D([i.id,r.id].join(" ").trim())+'"':"")+">"+(i.text?'<title id="'+D(i.id)+'">'+D(i.text)+"</title>":"")+(r.text?'<description id="'+D(r.id)+'">'+D(r.text)+"</description>":"")+'<rect width="100%" height="100%" fill="white" cx="0" cy="0"/><path d="',a=0;a<h.getModuleCount();a+=1)for(n=0,s=a*t+e;n<h.getModuleCount();n+=1)h.isDark(a,n)&&(l+="M"+(n*t+e)+","+s+d);return l+'" stroke="transparent" fill="black"/></svg>'},h.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=h.getModuleCount()*t+2*e,i=e,o=r-e;return S(r,r,function(e,r){if(!(i<=e)||!(e<o)||!(i<=r)||!(r<o))return 1;var n=Math.floor((e-i)/t),a=Math.floor((r-i)/t);return h.isDark(a,n)?0:1})},h.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var i=h.getModuleCount()*t+2*e,o="";return o+='<img src="'+h.createDataURL(t,e)+'" width="'+i+'" height="'+i+'"',r&&(o+=' alt="'+D(r)+'"'),o+="/>"};var D=function(t){for(var e="",r=0;r<t.length;r+=1){var i=t.charAt(r);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e},I=function(t){t=void 0===t?2:t;var e,r,i,o,n,a=1*h.getModuleCount()+2*t,s=t,d=a-t,c={"██":"█","█ ":"▀"," █":"▄","  ":" "},l={"██":"▀","█ ":"▀"," █":" ","  ":" "},u="";for(e=0;e<a;e+=2){for(r=0,i=Math.floor((e-s)/1),o=Math.floor((e+1-s)/1);r<a;r+=1)n="█",s<=r&&r<d&&s<=e&&e<d&&h.isDark(i,Math.floor((r-s)/1))&&(n=" "),s<=r&&r<d&&s<=e+1&&e+1<d&&h.isDark(o,Math.floor((r-s)/1))?n+=" ":n+="█",u+=t<1&&e+1>=d?l[n]:c[n];u+="\n"}return a%2&&t>0?u.substring(0,u.length-a-1)+Array(a+1).join("▀"):u.substring(0,u.length-1)};return h.createASCII=function(t,e){if((t=t||1)<2)return I(e);t-=1,e=void 0===e?2*t:e;var r,i,o,n,a=h.getModuleCount()*t+2*e,s=e,d=a-e,c=Array(t+1).join("██"),l=Array(t+1).join("  "),u="",g="";for(r=0;r<a;r+=1){for(i=0,o=Math.floor((r-s)/t),g="";i<a;i+=1)n=1,s<=i&&i<d&&s<=r&&r<d&&h.isDark(o,Math.floor((i-s)/t))&&(n=0),g+=n?c:l;for(o=0;o<t;o+=1)u+=g+"\n"}return u.substring(0,u.length-1)},h.renderTo2dContext=function(t,e){e=e||2;for(var r=h.getModuleCount(),i=0;i<r;i++)for(var o=0;o<r;o++)t.fillStyle=h.isDark(i,o)?"black":"white",t.fillRect(i*e,o*e,e,e)},h};s.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var i=t.charCodeAt(r);e.push(255&i)}return e}},s.stringToBytes=s.stringToBytesFuncs.default,s.createStringToBytes=function(t,e){var r=function(){for(var r=b(t),i=function(){var t=r.read();if(-1==t)throw"eof";return t},o=0,n={};;){var a=r.read();if(-1==a)break;var s=i(),h=i(),d=i(),c=String.fromCharCode(a<<8|s),l=h<<8|d;n[c]=l,o+=1}if(o!=e)throw o+" != "+e;return n}();return function(t){for(var e=[],i=0;i<t.length;i+=1){var o=t.charCodeAt(i);if(o<128)e.push(o);else{var n=r[t.charAt(i)];"number"==typeof n?(255&n)==n?e.push(n):(e.push(n>>>8),e.push(255&n)):e.push(63)}}return e}};var h={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e={},r=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},e.getBCHTypeInfo=function(t){for(var e=t<<10;r(e)-r(1335)>=0;)e^=1335<<r(e)-r(1335);return(t<<10|e)^21522},e.getBCHTypeNumber=function(t){for(var e=t<<12;r(e)-r(7973)>=0;)e^=7973<<r(e)-r(7973);return t<<12|e},e.getPatternPosition=function(e){return t[e-1]},e.getMaskFunction=function(t){switch(t){case c.PATTERN000:return function(t,e){return(t+e)%2==0};case c.PATTERN001:return function(t,e){return t%2==0};case c.PATTERN010:return function(t,e){return e%3==0};case c.PATTERN011:return function(t,e){return(t+e)%3==0};case c.PATTERN100:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case c.PATTERN101:return function(t,e){return t*e%2+t*e%3==0};case c.PATTERN110:return function(t,e){return(t*e%2+t*e%3)%2==0};case c.PATTERN111:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},e.getErrorCorrectPolynomial=function(t){for(var e=g([1],0),r=0;r<t;r+=1)e=e.multiply(g([1,u.gexp(r)],0));return e},e.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case h.MODE_NUMBER:return 10;case h.MODE_ALPHA_NUM:return 9;case h.MODE_8BIT_BYTE:case h.MODE_KANJI:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case h.MODE_NUMBER:return 12;case h.MODE_ALPHA_NUM:return 11;case h.MODE_8BIT_BYTE:return 16;case h.MODE_KANJI:return 10;default:throw"mode:"+t}else if(e<41)switch(t){case h.MODE_NUMBER:return 14;case h.MODE_ALPHA_NUM:return 13;case h.MODE_8BIT_BYTE:return 16;case h.MODE_KANJI:return 12;default:throw"mode:"+t}else throw"type:"+e},e.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,i=0;i<e;i+=1)for(var o=0;o<e;o+=1){for(var n=0,a=t.isDark(i,o),s=-1;s<=1;s+=1)if(!(i+s<0)&&!(e<=i+s))for(var h=-1;h<=1;h+=1)o+h<0||e<=o+h||0==s&&0==h||a!=t.isDark(i+s,o+h)||(n+=1);n>5&&(r+=3+n-5)}for(var i=0;i<e-1;i+=1)for(var o=0;o<e-1;o+=1){var d=0;t.isDark(i,o)&&(d+=1),t.isDark(i+1,o)&&(d+=1),t.isDark(i,o+1)&&(d+=1),t.isDark(i+1,o+1)&&(d+=1),(0==d||4==d)&&(r+=3)}for(var i=0;i<e;i+=1)for(var o=0;o<e-6;o+=1)t.isDark(i,o)&&!t.isDark(i,o+1)&&t.isDark(i,o+2)&&t.isDark(i,o+3)&&t.isDark(i,o+4)&&!t.isDark(i,o+5)&&t.isDark(i,o+6)&&(r+=40);for(var o=0;o<e;o+=1)for(var i=0;i<e-6;i+=1)t.isDark(i,o)&&!t.isDark(i+1,o)&&t.isDark(i+2,o)&&t.isDark(i+3,o)&&t.isDark(i+4,o)&&!t.isDark(i+5,o)&&t.isDark(i+6,o)&&(r+=40);for(var c=0,o=0;o<e;o+=1)for(var i=0;i<e;i+=1)t.isDark(i,o)&&(c+=1);return r+Math.abs(100*c/e/e-50)/5*10},e),u=function(){for(var t=Array(256),e=Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(var r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(var r=0;r<255;r+=1)e[t[r]]=r;var i={};return i.glog=function(t){if(t<1)throw"glog("+t+")";return e[t]},i.gexp=function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]},i}();function g(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var i=Array(t.length-r+e),o=0;o<t.length-r;o+=1)i[o]=t[o+r];return i}(),i={};return i.getAt=function(t){return r[t]},i.getLength=function(){return r.length},i.multiply=function(t){for(var e=Array(i.getLength()+t.getLength()-1),r=0;r<i.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=u.gexp(u.glog(i.getAt(r))+u.glog(t.getAt(o)));return g(e,0)},i.mod=function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=u.glog(i.getAt(0))-u.glog(t.getAt(0)),r=Array(i.getLength()),o=0;o<i.getLength();o+=1)r[o]=i.getAt(o);for(var o=0;o<t.getLength();o+=1)r[o]^=u.gexp(u.glog(t.getAt(o))+e);return g(r,0).mod(t)},i}var f=(i=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},n={},a=function(t,e){switch(e){case d.L:return i[(t-1)*4+0];case d.M:return i[(t-1)*4+1];case d.Q:return i[(t-1)*4+2];case d.H:return i[(t-1)*4+3];default:return}},n.getRSBlocks=function(t,e){var r=a(t,e);if(void 0===r)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var i=r.length/3,n=[],s=0;s<i;s+=1)for(var h=r[3*s+0],d=r[3*s+1],c=r[3*s+2],l=0;l<h;l+=1)n.push(o(d,c));return n},n),p=function(){var t=[],e=0,r={};return r.getBuffer=function(){return t},r.getAt=function(e){return(t[Math.floor(e/8)]>>>7-e%8&1)==1},r.put=function(t,e){for(var i=0;i<e;i+=1)r.putBit((t>>>e-i-1&1)==1)},r.getLengthInBits=function(){return e},r.putBit=function(r){var i=Math.floor(e/8);t.length<=i&&t.push(0),r&&(t[i]|=128>>>e%8),e+=1},r},w=function(t){var e=h.MODE_NUMBER,r={};r.getMode=function(){return e},r.getLength=function(e){return t.length},r.write=function(e){for(var r=0;r+2<t.length;)e.put(i(t.substring(r,r+3)),10),r+=3;r<t.length&&(t.length-r==1?e.put(i(t.substring(r,r+1)),4):t.length-r==2&&e.put(i(t.substring(r,r+2)),7))};var i=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+o(t.charAt(r));return e},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-48;throw"illegal char :"+t};return r},_=function(t){var e=h.MODE_ALPHA_NUM,r={};r.getMode=function(){return e},r.getLength=function(e){return t.length},r.write=function(e){for(var r=0;r+1<t.length;)e.put(45*i(t.charAt(r))+i(t.charAt(r+1)),11),r+=2;r<t.length&&e.put(i(t.charAt(r)),6)};var i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-48;if("A"<=t&&t<="Z")return t.charCodeAt(0)-65+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return r},y=function(t){var e=h.MODE_8BIT_BYTE,r=s.stringToBytes(t),i={};return i.getMode=function(){return e},i.getLength=function(t){return r.length},i.write=function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)},i},m=function(t){var e=h.MODE_KANJI,r=s.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(t,e){var i=r("友");if(2!=i.length||(i[0]<<8|i[1])!=38726)throw"sjis not supported."}(0,0);var i=r(t),o={};return o.getMode=function(){return e},o.getLength=function(t){return~~(i.length/2)},o.write=function(t){for(var e=0;e+1<i.length;){var r=(255&i[e])<<8|255&i[e+1];if(33088<=r&&r<=40956)r-=33088;else if(57408<=r&&r<=60351)r-=49472;else throw"illegal char at "+(e+1)+"/"+r;r=(r>>>8&255)*192+(255&r),t.put(r,13),e+=2}if(e<i.length)throw"illegal char at "+(e+1)},o},x=function(){var t=[],e={};return e.writeByte=function(e){t.push(255&e)},e.writeShort=function(t){e.writeByte(t),e.writeByte(t>>>8)},e.writeBytes=function(t,r,i){r=r||0,i=i||t.length;for(var o=0;o<i;o+=1)e.writeByte(t[o+r])},e.writeString=function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},e.toByteArray=function(){return t},e.toString=function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+"]"},e},v=function(){var t=0,e=0,r=0,i="",o={},n=function(t){i+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else if(t<26)return 65+t;else if(t<52)return 97+(t-26);else if(t<62)return 48+(t-52);else if(62==t)return 43;else if(63==t)return 47;throw"n:"+t};return o.writeByte=function(i){for(t=t<<8|255&i,e+=8,r+=1;e>=6;)n(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(n(t<<6-e),t=0,e=0),r%3!=0)for(var o=3-r%3,a=0;a<o;a+=1)i+="="},o.toString=function(){return i},o},b=function(t){var e=0,r=0,i=0,o={};o.read=function(){for(;i<8;){if(e>=t.length){if(0==i)return -1;throw"unexpected end of file./"+i}var o=t.charAt(e);if(e+=1,"="==o)return i=0,-1;o.match(/^\s$/)||(r=r<<6|n(o.charCodeAt(0)),i+=6)}var a=r>>>i-8&255;return i-=8,a};var n=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},M=function(t,e){var r=Array(t*e),i={};i.setPixel=function(e,i,o){r[i*t+e]=o},i.write=function(r){r.writeString("GIF87a"),r.writeShort(t),r.writeShort(e),r.writeByte(128),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(255),r.writeByte(255),r.writeByte(255),r.writeString(","),r.writeShort(0),r.writeShort(0),r.writeShort(t),r.writeShort(e),r.writeByte(0);var i=n(2);r.writeByte(2);for(var o=0;i.length-o>255;)r.writeByte(255),r.writeBytes(i,o,255),o+=255;r.writeByte(i.length-o),r.writeBytes(i,o,i.length-o),r.writeByte(0),r.writeString(";")};var o=function(t){var e=0,r=0,i={};return i.write=function(i,o){if(i>>>o!=0)throw"length over";for(;e+o>=8;)t.writeByte(255&(i<<e|r)),o-=8-e,i>>>=8-e,r=0,e=0;r=i<<e|r,e+=o},i.flush=function(){e>0&&t.writeByte(r)},i},n=function(t){for(var e=1<<t,i=(1<<t)+1,n=t+1,s=a(),h=0;h<e;h+=1)s.add(String.fromCharCode(h));s.add(String.fromCharCode(e)),s.add(String.fromCharCode(i));var d=x(),c=o(d);c.write(e,n);var l=0,u=String.fromCharCode(r[0]);for(l+=1;l<r.length;){var g=String.fromCharCode(r[l]);l+=1,s.contains(u+g)?u+=g:(c.write(s.indexOf(u),n),4095>s.size()&&(s.size()==1<<n&&(n+=1),s.add(u+g)),u=g)}return c.write(s.indexOf(u),n),c.write(i,n),c.flush(),d.toByteArray()},a=function(){var t={},e=0,r={};return r.add=function(i){if(r.contains(i))throw"dup key:"+i;t[i]=e,e+=1},r.size=function(){return e},r.indexOf=function(e){return t[e]},r.contains=function(e){return void 0!==t[e]},r};return i},S=function(t,e,r){for(var i=M(t,e),o=0;o<e;o+=1)for(var n=0;n<t;n+=1)i.setPixel(n,o,r(n,o));var a=x();i.write(a);for(var s=v(),h=a.toByteArray(),d=0;d<h.length;d+=1)s.writeByte(h[d]);return s.flush(),"data:image/gif;base64,"+s};return s}();z.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},t=function(){return z},"function"==typeof define&&define.amd?define([],t):I=t();class O{constructor(t){this._options=t?D(i(C,t)):C,this.update()}static _clearContainer(t){t&&(t.innerHTML="")}async _getQRStylingElement(t="png"){if(!this._qr)throw"QR code is empty";if("svg"===t.toLowerCase()){let t,e;return this._svg&&this._svgDrawingPromise?(e=this._svg,t=this._svgDrawingPromise):t=(e=new b(this._options)).drawQR(this._qr),await t,e}{let t,e;return this._canvas&&this._canvasDrawingPromise?(e=this._canvas,t=this._canvasDrawingPromise):t=(e=new w(this._options)).drawQR(this._qr),await t,e}}update(t){if(O._clearContainer(this._container),this._options=t?D(i(this._options,t)):this._options,this._options.data){var r;this._qr=((r=I)&&r.__esModule?r.default:r)(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return e.numeric;case/^[0-9A-Z $%*+\-./:]*$/.test(t):return e.alphanumeric;default:return e.byte}}(this._options.data)),this._qr.make(),this._options.type===M.canvas?(this._canvas=new w(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new b(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container)}}append(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===M.canvas?this._canvas&&t.appendChild(this._canvas.getCanvas()):this._svg&&t.appendChild(this._svg.getElement()),this._container=t}}async getRawData(t="png"){if(!this._qr)throw"QR code is empty";let e=await this._getQRStylingElement(t);return"svg"===t.toLowerCase()?new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+new XMLSerializer().serializeToString(e.getElement())],{type:"image/svg+xml"}):new Promise(r=>e.getCanvas().toBlob(r,`image/${t}`,1))}async download(t){if(!this._qr)throw"QR code is empty";let e="png",r="qr";"string"==typeof t?(e=t,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==typeof t&&null!==t&&(t.name&&(r=t.name),t.extension&&(e=t.extension));let i=await this._getQRStylingElement(e);if("svg"===e.toLowerCase()){let t=new XMLSerializer().serializeToString(i.getElement());o("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t='<?xml version="1.0" standalone="no"?>\r\n'+t),`${r}.svg`)}else o(i.getCanvas().toDataURL(`image/${e}`),`${r}.${e}`)}}var R=O;export{R as default,s as dotTypes,l as cornerDotTypes,d as cornerSquareTypes,P as errorCorrectionLevels,a as errorCorrectionPercents,e as modes,$ as qrTypes,M as drawTypes,O as QRCodeStyling};